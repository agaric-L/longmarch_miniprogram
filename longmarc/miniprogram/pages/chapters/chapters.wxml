<view class="container">
  <view class="title">经典场景重构</view>
  <block wx:if="{{loading}}">
    <view>加载中...</view>
  </block>
  <block wx:else>
    <view class="chapter">
      <view class="chapter-title">出发与突围</view>
      <block wx:for="{{chapters.start}}" wx:key="name">
        <view class="item">
          <view class="name">{{item.name}}</view>
          <view class="desc">{{item.description}}</view>
          <view class="actions">
            <button size="mini" bindtap="goScene" data-name="{{item.name}}">详情</button>
            <button class="ml8" size="mini" bindtap="openOnMap" data-latitude="{{item.latitude}}" data-longitude="{{item.longitude}}" data-name="{{item.name}}">在地图查看</button>
          </view>
        </view>
      </block>
    </view>

    <view class="chapter">
      <view class="chapter-title">转折与机动</view>
      <block wx:for="{{chapters.turn}}" wx:key="name">
        <view class="item">
          <view class="name">{{item.name}}</view>
          <view class="desc">{{item.description}}</view>
          <view class="actions">
            <button size="mini" bindtap="goScene" data-name="{{item.name}}">详情</button>
            <button class="ml8" size="mini" bindtap="openOnMap" data-latitude="{{item.latitude}}" data-longitude="{{item.longitude}}" data-name="{{item.name}}">在地图查看</button>
          </view>
        </view>
      </block>
    </view>

    <view class="chapter">
      <view class="chapter-title">飞夺天险</view>
      <block wx:for="{{chapters.difficult}}" wx:key="name">
        <view class="item">
          <view class="name">{{item.name}}</view>
          <view class="desc">{{item.description}}</view>
          <view class="actions">
            <button size="mini" bindtap="goScene" data-name="{{item.name}}">详情</button>
            <button class="ml8" size="mini" bindtap="openOnMap" data-latitude="{{item.latitude}}" data-longitude="{{item.longitude}}" data-name="{{item.name}}">在地图查看</button>
          </view>
        </view>
      </block>
    </view>

    <view class="chapter">
      <view class="chapter-title">胜利会师</view>
      <block wx:for="{{chapters.end}}" wx:key="name">
        <view class="item">
          <view class="name">{{item.name}}</view>
          <view class="desc">{{item.description}}</view>
          <view class="actions">
            <button size="mini" bindtap="goScene" data-name="{{item.name}}">详情</button>
            <button class="ml8" size="mini" bindtap="openOnMap" data-latitude="{{item.latitude}}" data-longitude="{{item.longitude}}" data-name="{{item.name}}">在地图查看</button>
          </view>
        </view>
      </block>
    </view>

    <view style="padding:12px 0;">
      <button size="mini" bindtap="goTimeline">按时间线回顾</button>
    </view>
  </block>
</view> 